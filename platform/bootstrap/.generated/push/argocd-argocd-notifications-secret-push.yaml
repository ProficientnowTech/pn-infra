apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: argocd-notifications-secret-push
  namespace: argocd
spec:
  refreshInterval: 1h
  secretStoreRefs:
    - name: vault-backend
      kind: ClusterSecretStore
  selector:
    secret:
      name: argocd-notifications-secret
  data:
    - match:
        secretKey: email-from
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: email-from
    - match:
        secretKey: email-host
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: email-host
    - match:
        secretKey: email-password
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: email-password
    - match:
        secretKey: email-port
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: email-port
    - match:
        secretKey: email-username
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: email-username
    - match:
        secretKey: slack-token
        remoteRef:
          remoteKey: applications/infrastructure/argocd/notifications
          property: slack-token
