[defaults]
stdout_callback = default
callbacks_enabled = profile_tasks,timer
display_skipped_hosts = False
force_color = True

# Kubespray expects these paths to be present; keep them explicit so running
# via Docker (with a custom ANSIBLE_CONFIG) still finds Kubespray roles/modules.
roles_path = /kubespray/roles:/opt/kubespray/roles:roles:/usr/share/kubespray/roles
library = /kubespray/library:/opt/kubespray/library:library

# Fact caching - persist across container runs
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /kubespray/inventory/pn-production/.fact_cache
fact_caching_timeout = 86400

forks = 50

# https://github.com/ansible/ansible/issues/56930 (to ignore group names with - and .)
force_valid_group_names = ignore

host_key_checking = False

[ssh_connection]
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=5m -o ConnectionAttempts=3 -o ConnectTimeout=10 -o ServerAliveInterval=30 -o ServerAliveCountMax=3 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
timeout = 30
