---
# Cluster API Operator Configuration for PN Platform
# Values nested under 'cluster-api-operator:' key since it's a dependency chart
# Provider format: "provider-name:version" (string, not map)
# Multiple providers: "docker:v1.9.4;aws:v2.7.1"

cluster-api-operator:
  # CAPI Provider configuration (string format: "provider:version")
  core: cluster-api:v1.8.7
  bootstrap: kubeadm:v1.8.7
  controlPlane: kubeadm:v1.8.7
  infrastructure: kubevirt:v0.2.0

  # Feature gates configuration
  manager:
    featureGates:
      core:
        ClusterTopology: "true"
        ClusterResourceSet: "true"
      kubeadm:
        ClusterTopology: "true"

  # Operator deployment settings
  replicaCount: 1
  logLevel: 2

  image:
    manager:
      repository: registry.k8s.io/capi-operator/cluster-api-operator
      tag: v0.14.0
      pullPolicy: IfNotPresent

  resources:
    manager:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi

  leaderElection:
    enabled: true

# Additional provider configuration (for reference, not used by chart)
providerConfig:
  kubevirt:
    defaultVM:
      cores: 2
      memory: 4Gi
      disk: 20Gi
    storageClass: plt-blk-hdd-repl
    network:
      cni: kube-ovn
    sshKeySecret: cluster-api-ssh-key
