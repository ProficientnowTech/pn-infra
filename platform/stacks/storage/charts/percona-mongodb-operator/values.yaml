---
# Global configuration
global:
  repoURL: 'https://github.com/ProficientnowTech/pn-infra.git'
  targetRevision: 'main'

# Labels configuration
labels:
  component: percona-mongodb-operator
  component-category: database
  db-type: nosql-db
  db-type-name: mongodb
  managed-by: argocd

# Percona Operator for MongoDB Configuration
# Based on: https://docs.percona.com/percona-operator-for-mongodb/
psmdb-operator:
  enabled: true

  # Operator replica count
  replicaCount: 2

  # Operator image configuration
  image:
    repository: percona/percona-server-mongodb-operator
    tag: 1.21.1
    pullPolicy: IfNotPresent

  # Telemetry configuration
  # Set to true to disable telemetry collection
  disableTelemetry: false

  # Namespace watching configuration
  # Watch all namespaces (cluster-wide mode)
  watchAllNamespaces: false
  # Specific namespaces to watch (comma-separated)
  # watchNamespace: ""

  # RBAC configuration
  rbac:
    create: true

  # Service account
  serviceAccount:
    create: true
    annotations: {}

  # Pod annotations (for Prometheus monitoring)
  podAnnotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"

  # Pod labels
  podLabels: {}

  # Security contexts
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 2
    runAsGroup: 2
    fsGroup: 2
    fsGroupChangePolicy: "OnRootMismatch"

  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
      - ALL
    seccompProfile:
      type: RuntimeDefault

  # Resource limits for the operator
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

  # Environment variables
  env:
    resyncPeriod: 5s

  # Logging configuration
  logStructured: false
  logLevel: "INFO"

  # Concurrent reconciliation workers
  maxConcurrentReconciles: "1"

  # Node selector, tolerations, and affinity
  nodeSelector: {}
  tolerations: []
  affinity: {}
